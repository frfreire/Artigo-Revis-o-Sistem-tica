# Makefile para compilação do artigo HIDE

# Variáveis
MAIN = access_complete
TEX = $(MAIN).tex
PDF = $(MAIN).pdf
BIB = references_extended.bib

# Regra principal
all: $(PDF)

# Compilação completa
$(PDF): $(TEX) $(BIB)
	@echo "=== Compilando $(MAIN) ==="
	pdflatex -interaction=nonstopmode $(MAIN)
	bibtex $(MAIN)
	pdflatex -interaction=nonstopmode $(MAIN)
	pdflatex -interaction=nonstopmode $(MAIN)
	@echo "=== Compilação concluída ==="

# Limpeza de arquivos auxiliares
clean:
	rm -f *.aux *.bbl *.blg *.log *.out *.toc *.lof *.lot *.fls *.fdb_latexmk *.synctex.gz

# Limpeza completa (incluindo PDF)
distclean: clean
	rm -f $(PDF)

# Visualizar PDF (se disponível)
view: $(PDF)
	@if command -v evince >/dev/null 2>&1; then \
		evince $(PDF) & \
	elif command -v xpdf >/dev/null 2>&1; then \
		xpdf $(PDF) & \
	else \
		echo "Nenhum visualizador de PDF encontrado"; \
	fi

# Verificar número de páginas
pages: $(PDF)
	@if command -v pdfinfo >/dev/null 2>&1; then \
		echo "Número de páginas: $$(pdfinfo $(PDF) | grep Pages | awk '{print $$2}')"; \
	else \
		echo "pdfinfo não disponível para contar páginas"; \
	fi

# Ajuda
help:
	@echo "Opções disponíveis:"
	@echo "  make all     - Compila o documento completo"
	@echo "  make clean   - Remove arquivos auxiliares"
	@echo "  make distclean - Remove todos os arquivos gerados"
	@echo "  make view    - Abre o PDF (se disponível)"
	@echo "  make pages   - Conta o número de páginas"
	@echo "  make help    - Mostra esta ajuda"

.PHONY: all clean distclean view pages help
